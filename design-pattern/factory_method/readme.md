# ファクトリメソッドパターン

- オブジェクトの生成を抽象化し、交換可能にする
- オブジェクトの生成ロジックを、それを必要とするクラス（クライアント）から分離する

## 構成要素

### 1. プロダクト

- 生成されるオブジェクトが共通して持つべき振る舞いを定義するインターフェース
- サンプルコードでは `Shape` トレイト

### 2. 具象プロダクト

- プロダクトインターフェースを実装する具体的なクラス
- サンプルコードでは `Rectangle` と `Circle`

### 3. クリエイタ

- プロダクトオブジェクトを生成する責任を持つクラス
- サンプルコードでは `ShapeFactory`
- `ShapeFactory` に定義された `new_shape` メソッドが具体的なオブジェクトを生成する

## メリット

### 1. 生成ロジックの隠蔽

- `main` 関数（クライアント）は、 `ShapeFactory::new_shape` を呼び出すだけで、 `Circle` や `Rectangle` といった具体的なクラス名を知る必要がない
- 代わりに `ShapeType` という列挙型を渡すことでどの図形を生成したいか伝えている

### 2. 拡張性

- 新たに `Triangle` という図形を追加したい場合、`Shape` トレイトを実装する `Triangle` 構造体を作成し、 `ShapeType` に新しいバリアントを追加し、 `ShapeFactory` のmatch文に新しい分岐を追加するだけで済む
- 既存のクライアントコード（main関数）を大幅に変更する必要がない
